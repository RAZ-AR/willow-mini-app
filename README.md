# Willow Coffee ‚Äî Telegram Mini App

![Status](https://img.shields.io/badge/Status-Production%20Ready-green) ![Frontend](https://img.shields.io/badge/Frontend-GitHub%20Pages-blue) ![Backend](https://img.shields.io/badge/Backend-Koyeb-purple) ![Database](https://img.shields.io/badge/Database-PostgreSQL-orange)

–ü–æ–ª–Ω–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ Telegram Mini App –¥–ª—è –∫–æ—Ñ–µ–π–Ω–∏ —Å —Å–∏—Å—Ç–µ–º–æ–π –∑–∞–∫–∞–∑–æ–≤, –ø—Ä–æ–≥—Ä–∞–º–º–æ–π –ª–æ—è–ª—å–Ω–æ—Å—Ç–∏ –∏ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å—é.

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º—ã

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   Telegram WebApp   ‚îÇ    ‚îÇ      Backend API     ‚îÇ    ‚îÇ   Admin Channel     ‚îÇ
‚îÇ  (GitHub Pages)     ‚îÇ‚óÑ‚îÄ‚îÄ‚ñ∫‚îÇ      (Koyeb)         ‚îÇ‚îÄ‚îÄ‚îÄ‚ñ∫‚îÇ   (Telegram)        ‚îÇ
‚îÇ                     ‚îÇ    ‚îÇ                      ‚îÇ    ‚îÇ                     ‚îÇ
‚îÇ ‚Ä¢ HTML/CSS/JS       ‚îÇ    ‚îÇ ‚Ä¢ Express.js         ‚îÇ    ‚îÇ ‚Ä¢ Order alerts      ‚îÇ
‚îÇ ‚Ä¢ Menu display      ‚îÇ    ‚îÇ ‚Ä¢ PostgreSQL         ‚îÇ    ‚îÇ ‚Ä¢ Admin commands    ‚îÇ
‚îÇ ‚Ä¢ Order form        ‚îÇ    ‚îÇ ‚Ä¢ Telegram Bot API   ‚îÇ    ‚îÇ ‚Ä¢ Real-time updates ‚îÇ
‚îÇ ‚Ä¢ Loyalty system    ‚îÇ    ‚îÇ ‚Ä¢ CORS enabled       ‚îÇ    ‚îÇ                     ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
            ‚îÇ                         ‚îÇ
            ‚îÇ                         ‚îÇ
            ‚ñº                         ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   Google Sheets     ‚îÇ    ‚îÇ    PostgreSQL DB     ‚îÇ
‚îÇ                     ‚îÇ    ‚îÇ                      ‚îÇ
‚îÇ ‚Ä¢ Dynamic menu      ‚îÇ    ‚îÇ ‚Ä¢ Users & cards      ‚îÇ
‚îÇ ‚Ä¢ Multi-language    ‚îÇ    ‚îÇ ‚Ä¢ Orders & items     ‚îÇ
‚îÇ ‚Ä¢ Easy updates      ‚îÇ    ‚îÇ ‚Ä¢ Transactions       ‚îÇ
‚îÇ ‚Ä¢ CSV export        ‚îÇ    ‚îÇ ‚Ä¢ Loyalty stars      ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

## üöÄ –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ

### ‚úÖ –ü–æ–ª–Ω–æ—Å—Ç—å—é —Ä–∞–±–æ—Ç–∞–µ—Ç:
- **Frontend**: –ü–æ–ª–Ω–æ—Å—Ç—å—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –Ω–∞ GitHub Pages
- **Backend API**: Express.js —Å–µ—Ä–≤–µ—Ä –Ω–∞ Koyeb —Å –ø–æ–ª–Ω—ã–º —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–æ–º
- **–°–∏—Å—Ç–µ–º–∞ –∑–∞–∫–∞–∑–æ–≤**: ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –æ—à–∏–±–∫–∞ "Failed to create order"
- **–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è**: –°—Ç–æ–ª–∏–∫–∏ (1-10 + –Ω–∞ –≤—ã–Ω–æ—Å), ETA (—Å–µ–π—á–∞—Å/10–º–∏–Ω/20–º–∏–Ω), —Å–ø–æ—Å–æ–±—ã –æ–ø–ª–∞—Ç—ã (–Ω–∞–ª–∏—á–Ω—ã–µ/–∑–≤–µ–∑–¥—ã)  
- **–†–∞—Å—á–µ—Ç –ª–æ—è–ª—å–Ω–æ—Å—Ç–∏**: 1 –∑–≤–µ–∑–¥–∞ –∑–∞ –∫–∞–∂–¥—ã–µ 350 RSD
- **–¢–µ—Å—Ç–æ–≤—ã–π —Ä–µ–∂–∏–º**: –ü–æ–ª–Ω–æ—Å—Ç—å—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π –±–µ–∑ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
- **–î–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ –º–µ–Ω—é**: –ó–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –∏–∑ Google Sheets —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –º–Ω–æ–≥–æ—è–∑—ã—á–Ω–æ—Å—Ç–∏
- **Telegram Bot**: –ù–∞—Å—Ç—Ä–æ–µ–Ω webhook, WebApp menu button
- **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫**: –ù–∞–¥–µ–∂–Ω–∞—è —Ä–∞–±–æ—Ç–∞ –≤ —Ç–µ—Å—Ç–æ–≤–æ–º —Ä–µ–∂–∏–º–µ

### üîß –ü–æ—Å–ª–µ–¥–Ω–∏–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è (30.08.2025):
- ‚úÖ **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ DATABASE_URL**: –î–æ–±–∞–≤–ª–µ–Ω—ã –ø—Ä–æ–≤–µ—Ä–∫–∏ –Ω–∞ –≤–∞–ª–∏–¥–Ω–æ—Å—Ç—å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –ë–î
- ‚úÖ **–†–µ—à–µ–Ω–∞ –ø—Ä–æ–±–ª–µ–º–∞ –∑–∞–∫–∞–∑–æ–≤**: –£—Å—Ç—Ä–∞–Ω–µ–Ω–∞ –æ—à–∏–±–∫–∞ "Failed to create order" 
- ‚úÖ **–£–ª—É—á—à–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫**: Graceful fallback –Ω–∞ —Ç–µ—Å—Ç–æ–≤—ã–π —Ä–µ–∂–∏–º
- ‚úÖ **–ù–∞—Å—Ç—Ä–æ–µ–Ω Telegram Bot**: Webhook, WebApp –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
- ‚úÖ **–î–æ–±–∞–≤–ª–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ**: –î–µ—Ç–∞–ª—å–Ω–∞—è –æ—Ç–ª–∞–¥–∫–∞ –¥–ª—è webhook'–æ–≤

### ‚öôÔ∏è –¢—Ä–µ–±—É–µ—Ç —Ñ–∏–Ω–∞–ª—å–Ω–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:
- **ADMIN_CHANNEL_ID**: –ù—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –±–æ—Ç–∞ @willow_L_bot –≤ –∞–¥–º–∏–Ω-–≥—Ä—É–ø–ø—É –∏ –ø–æ–ª—É—á–∏—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π ID
- **Google Sheets**: –°–¥–µ–ª–∞—Ç—å —Ç–∞–±–ª–∏—Ü—É –ø—É–±–ª–∏—á–Ω–æ–π (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- **DATABASE_URL**: PostgreSQL –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ –¥–ª—è –ø–æ–ª–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏)

## üõ†Ô∏è –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—è | –•–æ—Å—Ç–∏–Ω–≥ | –°–æ—Å—Ç–æ—è–Ω–∏–µ |
|-----------|------------|---------|-----------|
| **Frontend** | HTML/CSS/JS + Telegram WebApp SDK | GitHub Pages | ‚úÖ –ü–æ–ª–Ω–æ—Å—Ç—å—é —Ä–∞–±–æ—Ç–∞–µ—Ç |
| **Backend** | Express.js + Node.js | Koyeb | ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –≤—Å–µ –æ—à–∏–±–∫–∏ |
| **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö** | PostgreSQL (prod) / Mock data (test) | Koyeb (–≤—Å—Ç—Ä–æ–µ–Ω–Ω–∞—è) | ‚úÖ –¢–µ—Å—Ç–æ–≤—ã–π —Ä–µ–∂–∏–º —Ä–∞–±–æ—Ç–∞–µ—Ç |
| **–ú–µ–Ω—é** | Google Sheets CSV | Google Drive | ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç (–ø—Ä–∏–≤–∞—Ç–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞) |
| **–ë–æ—Ç** | Telegram Bot API | - | ‚úÖ –ù–∞—Å—Ç—Ä–æ–µ–Ω, –Ω—É–∂–Ω–∞ –∞–¥–º–∏–Ω-–≥—Ä—É–ø–ø–∞ |

## üìã –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ —Å–∏—Å—Ç–µ–º—ã

### –î–ª—è –∫–ª–∏–µ–Ω—Ç–æ–≤:
- üçΩÔ∏è **–ü—Ä–æ—Å–º–æ—Ç—Ä –º–µ–Ω—é** —Å —Ü–µ–Ω–∞–º–∏ –Ω–∞ 3 —è–∑—ã–∫–∞—Ö
- üõí **–ö–æ—Ä–∑–∏–Ω–∞ –∑–∞–∫–∞–∑–æ–≤** —Å –≤—ã–±–æ—Ä–æ–º —Å—Ç–æ–ª–∏–∫–∞ –∏ –≤—Ä–µ–º–µ–Ω–∏
- ‚≠ê **–ü—Ä–æ–≥—Ä–∞–º–º–∞ –ª–æ—è–ª—å–Ω–æ—Å—Ç–∏** (1 –∑–≤–µ–∑–¥–∞ = 350 RSD)
- üéÅ **–û–±–º–µ–Ω –∑–≤–µ–∑–¥** –Ω–∞ –Ω–∞–≥—Ä–∞–¥—ã (–∫–æ—Ñ–µ, –∑–∞–≤—Ç—Ä–∞–∫, etc.)
- üí≥ **–°–ø–æ—Å–æ–±—ã –æ–ø–ª–∞—Ç—ã**: –Ω–∞–ª–∏—á–Ω—ã–µ –∏–ª–∏ –∑–≤–µ–∑–¥—ã
- üì± **Telegram –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è** —Å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è–º–∏

### –î–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤:
- üì¢ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è** –æ –Ω–æ–≤—ã—Ö –∑–∞–∫–∞–∑–∞—Ö
- üìä **–î–µ—Ç–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è**: –∫–ª–∏–µ–Ω—Ç, —Å—Ç–æ–ª–∏–∫, —Å–æ—Å—Ç–∞–≤ –∑–∞–∫–∞–∑–∞, —Å—É–º–º–∞
- ‚ö° **–ê–¥–º–∏–Ω –∫–æ–º–∞–Ω–¥—ã** –≤ Telegram –∫–∞–Ω–∞–ª–µ
- üîÑ **–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –º–µ–Ω—é** —á–µ—Ä–µ–∑ Google Sheets
- üìà **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ª–æ—è–ª—å–Ω–æ—Å—Ç—å—é** –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

## üåê –°—Å—ã–ª–∫–∏

| –†–µ—Å—É—Ä—Å | URL | –°—Ç–∞—Ç—É—Å |
|--------|-----|--------|
| **Frontend** | https://raz-ar.github.io/willow-mini-app/ | ‚úÖ –ê–∫—Ç–∏–≤–µ–Ω |
| **Backend API** | https://mild-lotta-willow-2025-1b544553.koyeb.app | ‚úÖ –ê–∫—Ç–∏–≤–µ–Ω |
| **Menu API** | https://mild-lotta-willow-2025-1b544553.koyeb.app/api/menu | ‚úÖ –ê–∫—Ç–∏–≤–µ–Ω |
| **Health Check** | https://mild-lotta-willow-2025-1b544553.koyeb.app/health | ‚úÖ –ê–∫—Ç–∏–≤–µ–Ω |
| **Google Sheets** | [Menu Table](https://docs.google.com/spreadsheets/d/1BRQuzea6bba0NxxPk9koLSzpHkfiAzrKmwDa8ow7128/) | ‚ö†Ô∏è –ü—Ä–∏–≤–∞—Ç–Ω–∞—è |

## üîß API Endpoints

### –ü—É–±–ª–∏—á–Ω—ã–µ
```
GET  /health              - –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è —Å–µ—Ä–≤–µ—Ä–∞
GET  /api/menu            - –ü–æ–ª—É—á–µ–Ω–∏–µ –º–µ–Ω—é –∏–∑ Google Sheets
POST /api/user            - –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è/—Å–æ–∑–¥–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è  
POST /api/order           - –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–∫–∞–∑–∞
POST /api/redeem          - –û–±–º–µ–Ω –∑–≤–µ–∑–¥ –Ω–∞ –Ω–∞–≥—Ä–∞–¥—ã
```

### Webhook
```
POST /tg/webhook          - Telegram Bot webhook
```

## üöÄ –ë—ã—Å—Ç—Ä—ã–π –∑–∞–ø—É—Å–∫

### ‚úÖ –°–∏—Å—Ç–µ–º–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–∞–±–æ—Ç–∞–µ—Ç!
1. **–û—Ç–∫—Ä–æ–π—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ**: https://raz-ar.github.io/willow-mini-app/
2. **–î–æ–±–∞–≤—å—Ç–µ —Ç–æ–≤–∞—Ä—ã –≤ –∫–æ—Ä–∑–∏–Ω—É** - –≤—ã–±–µ—Ä–∏—Ç–µ –∏–∑ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–≥–æ –º–µ–Ω—é
3. **–í—ã–±–µ—Ä–∏—Ç–µ —Å—Ç–æ–ª–∏–∫ –∏ —Å–ø–æ—Å–æ–± –æ–ø–ª–∞—Ç—ã** (–Ω–∞–ª–∏—á–Ω—ã–µ/–∑–≤–µ–∑–¥—ã)
4. **–û—Ñ–æ—Ä–º–∏—Ç–µ –∑–∞–∫–∞–∑** - ‚úÖ –æ—à–∏–±–∫–∞ "Failed to create order" –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∞
5. **–ü–æ–ª—É—á–∏—Ç–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ** —Å –¥–µ—Ç–∞–ª—è–º–∏ –∑–∞–∫–∞–∑–∞ –∏ –Ω–∞—á–∏—Å–ª–µ–Ω–Ω—ã–º–∏ –∑–≤–µ–∑–¥–∞–º–∏

### üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∞–¥–º–∏–Ω-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π:

#### 1. ‚úÖ –ë–æ—Ç —É–∂–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω
```
BOT_TOKEN: 8471476848:AAEV1eSNi6lO5aH--fS4YivQNb8Qe2fRD58
Bot Username: @willow_L_bot
Webhook: ‚úÖ –ù–∞—Å—Ç—Ä–æ–µ–Ω –Ω–∞ https://mild-lotta-willow-2025-1b544553.koyeb.app/tg/webhook
WebApp Menu: ‚úÖ –ù–∞—Å—Ç—Ä–æ–µ–Ω–æ
```

#### 2. –î–æ–±–∞–≤—å—Ç–µ –±–æ—Ç–∞ –≤ –∞–¥–º–∏–Ω-–≥—Ä—É–ø–ø—É
1. **–î–æ–±–∞–≤—å—Ç–µ @willow_L_bot –≤ –∞–¥–º–∏–Ω-–≥—Ä—É–ø–ø—É**
2. **–î–∞–π—Ç–µ –ø—Ä–∞–≤–∞ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞** (–∏–ª–∏ –º–∏–Ω–∏–º—É–º –Ω–∞ –æ—Ç–ø—Ä–∞–≤–∫—É —Å–æ–æ–±—â–µ–Ω–∏–π)
3. **–û—Ç–ø—Ä–∞–≤—å—Ç–µ –ª—é–±–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ –≥—Ä—É–ø–ø—É** - –±–æ—Ç –∑–∞–ø–∏—à–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π ID –≤ –ª–æ–≥–∏
4. **–û–±–Ω–æ–≤–∏—Ç–µ ADMIN_CHANNEL_ID –≤ Koyeb** —Å ID –∏–∑ –ª–æ–≥–æ–≤

#### 3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –≤ Koyeb
```bash
# –ü–æ—Å–ª–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –±–æ—Ç–∞ –Ω–∞–π–¥–∏—Ç–µ –≤ –ª–æ–≥–∞—Ö —Å—Ç—Ä–æ–∫—É:
"Channel post from: -1001234567890 supergroup"
# –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —ç—Ç–æ—Ç ID –∏ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∫–∞–∫ ADMIN_CHANNEL_ID
```

## üìä –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

```sql
-- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –∏ –∫–∞—Ä—Ç—ã –ª–æ—è–ª—å–Ω–æ—Å—Ç–∏
users (telegram_id, first_name, last_name, username, stars, card_number, created_at)

-- –ó–∞–∫–∞–∑—ã
orders (id, short_id, user_id, total_amount, stars_added, eta_minutes, due_at, status, created_at)

-- –ü–æ–∑–∏—Ü–∏–∏ –∑–∞–∫–∞–∑–æ–≤  
order_items (id, order_id, item_id, quantity, unit_price, created_at)

-- –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –∑–≤–µ–∑–¥
transactions (id, user_id, type, stars_change, order_id, description, created_at)

-- –ù–∞–≥—Ä–∞–¥—ã –ø—Ä–æ–≥—Ä–∞–º–º—ã –ª–æ—è–ª—å–Ω–æ—Å—Ç–∏
rewards (key, cost_stars, name_en, name_ru, name_sr, description, active)
```

## üîÑ –ü—Ä–æ—Ü–µ—Å—Å –∑–∞–∫–∞–∑–∞

```mermaid
sequenceDiagram
    participant U as User
    participant F as Frontend
    participant B as Backend  
    participant T as Telegram
    participant A as Admin

    U->>F: –û—Ç–∫—Ä—ã–≤–∞–µ—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
    F->>B: GET /api/user (–∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è)
    B->>F: –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    
    U->>F: –í—ã–±–∏—Ä–∞–µ—Ç —Ç–æ–≤–∞—Ä—ã
    U->>F: –ó–∞–ø–æ–ª–Ω—è–µ—Ç —Ñ–æ—Ä–º—É –∑–∞–∫–∞–∑–∞
    F->>B: POST /api/order
    
    B->>B: –í–∞–ª–∏–¥–∏—Ä—É–µ—Ç –¥–∞–Ω–Ω—ã–µ
    B->>B: –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –≤ –ë–î
    B->>B: –ù–∞—á–∏—Å–ª—è–µ—Ç –∑–≤–µ–∑–¥—ã
    B->>T: –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –≤ –∞–¥–º–∏–Ω-–∫–∞–Ω–∞–ª
    T->>A: –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∫–∞—Ä—Ç–æ—á–∫—É –∑–∞–∫–∞–∑–∞
    
    B->>F: –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ
    F->>U: –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —É—Å–ø–µ—à–Ω–æ–µ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ
```

## üêõ –û—Ç–ª–∞–¥–∫–∞ –∏ –ª–æ–≥–∏

### –ü—Ä–æ–≤–µ—Ä–∫–∞ API:
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è —Å–µ—Ä–≤–µ—Ä–∞
curl https://mild-lotta-willow-2025-1b544553.koyeb.app/health

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –º–µ–Ω—é
curl https://mild-lotta-willow-2025-1b544553.koyeb.app/api/menu

# –¢–µ—Å—Ç–æ–≤—ã–π –∑–∞–∫–∞–∑
curl -X POST https://mild-lotta-willow-2025-1b544553.koyeb.app/api/order \
  -H "Content-Type: application/json" \
  -d '{
    "initData": "test",
    "items": [{"id": "item-234bbf05", "qty": 1}],
    "eta_minutes": 10,
    "table_number": "1",
    "payment_method": "cash"
  }'
```

### –õ–æ–≥–∏ Koyeb:
–ü—Ä–æ–≤–µ—Ä—å –ª–æ–≥–∏ –≤ –ø–∞–Ω–µ–ª–∏ Koyeb ‚Üí —Ç–≤–æ–π —Å–µ—Ä–≤–∏—Å ‚Üí Logs

## üîÆ –ü–ª–∞–Ω—ã —Ä–∞–∑–≤–∏—Ç–∏—è

### ‚úÖ –ù–µ–¥–∞–≤–Ω–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ (30.08.2025):
- [x] **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –æ—à–∏–±–∫–∞ –∑–∞–∫–∞–∑–æ–≤** - –†–µ—à–µ–Ω–∞ –ø—Ä–æ–±–ª–µ–º–∞ "Failed to create order"
- [x] **–£–ª—É—á—à–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –ë–î** - Graceful fallback –ø—Ä–∏ –ø—Ä–æ–±–ª–µ–º–∞—Ö —Å DATABASE_URL
- [x] **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ Telegram Bot** - Webhook, WebApp menu button  
- [x] **–î–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ** - –û—Ç–ª–∞–¥–∫–∞ webhook'–æ–≤ –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∑–∞–∫–∞–∑–æ–≤
- [x] **–¢–µ—Å—Ç–æ–≤—ã–π —Ä–µ–∂–∏–º** - –ü–æ–ª–Ω–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–∞—è —Ä–∞–±–æ—Ç–∞ –±–µ–∑ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

### –°–ª–µ–¥—É—é—â–∏–µ —Ñ–∏—á–∏:
- [ ] –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∑–∞–∫–∞–∑–æ–≤ –∏ –∞–Ω–∞–ª–∏—Ç–∏–∫–∞
- [ ] –°–∏—Å—Ç–µ–º–∞ —Å–∫–∏–¥–æ–∫ –∏ –ø—Ä–æ–º–æ–∫–æ–¥–æ–≤  
- [ ] Push-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ –∑–∞–∫–∞–∑–∞
- [ ] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Å–∏—Å—Ç–µ–º–∞–º–∏ –æ–ø–ª–∞—Ç—ã
- [ ] –ú–æ–±–∏–ª—å–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ (React Native)
- [ ] –°–∏—Å—Ç–µ–º–∞ –æ—Ç–∑—ã–≤–æ–≤ –∏ —Ä–µ–π—Ç–∏–Ω–≥–æ–≤
- [ ] –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞–ø–∞—Å–∞–º–∏ –∏ –æ—Å—Ç–∞—Ç–∫–∞–º–∏

### –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —É–ª—É—á—à–µ–Ω–∏—è:
- [x] **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –∏ fallback** - –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ 30.08.2025
- [x] **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –æ—Ç–ª–∞–¥–∫–∞** - –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ 30.08.2025
- [ ] –ú–∏–≥—Ä–∞—Ü–∏—è –Ω–∞ TypeScript
- [ ] Unit –∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã
- [ ] CI/CD pipeline
- [ ] Monitoring –∏ alerting
- [ ] Backup –∏ disaster recovery
- [ ] Load balancing –¥–ª—è –≤—ã—Å–æ–∫–∏—Ö –Ω–∞–≥—Ä—É–∑–æ–∫

## üë• –£—á–∞—Å—Ç–Ω–∏–∫–∏ –ø—Ä–æ–µ–∫—Ç–∞

- **–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∏ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞**: Claude Code AI
- **–ü—Ä–æ–¥—É–∫—Ç–æ–≤—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è**: –í–ª–∞–¥–µ–ª–µ—Ü –∫–æ—Ñ–µ–π–Ω–∏
- **–î–∏–∑–∞–π–Ω**: –ú–∏–Ω–∏–º–∞–ª–∏—Å—Ç–∏—á–Ω—ã–π UI –≤ —Å—Ç–∏–ª–µ Telegram

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

–ü—Ä–æ–µ–∫—Ç —Ä–∞–∑—Ä–∞–±–æ—Ç–∞–Ω –¥–ª—è —á–∞—Å—Ç–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –∫–æ—Ñ–µ–π–Ω–∏ Willow Coffee.

---

**üîó –†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π**: https://github.com/RAZ-AR/willow-mini-app  
**üì± –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ**: https://raz-ar.github.io/willow-mini-app/ ‚úÖ **–†–ê–ë–û–¢–ê–ï–¢**  
**‚ö° API**: https://mild-lotta-willow-2025-1b544553.koyeb.app ‚úÖ **–ò–°–ü–†–ê–í–õ–ï–ù**

*–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ: 30 –∞–≤–≥—É—Å—Ç–∞ 2025 - –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –≤—Å–µ –æ—à–∏–±–∫–∏ –∑–∞–∫–∞–∑–æ–≤*